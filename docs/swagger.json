{"openapi":"3.0.0","info":{"title":"Teste Prático Back-end BeTalent","version":"1.0.0","description":"sistema gerenciador de pagamentos multi-gateway."},"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}},"schemas":{"Client":{"type":"object","properties":{"id":{"type":"number"},"name":{"type":"string"},"email":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"transactions":{"type":"array","items":{"$ref":"#/components/schemas/Transaction"}}}},"Transaction":{"type":"object","properties":{"id":{"type":"number"},"clientId":{"type":"number"},"gatewayId":{"type":"number"},"external_id":{"type":"string"},"status":{"type":"string"},"amount":{"type":"number"},"card_last_numbers":{"type":"string"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"},"transactionProducts":{"type":"array","items":{"$ref":"#/components/schemas/TransactionProduct"}}}},"TransactionProduct":{"type":"object","properties":{"id":{"type":"number"},"transactionId":{"type":"number"},"productId":{"type":"number"},"quantity":{"type":"number"},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"Gateway":{"type":"object","properties":{"id":{"type":"number","example":1},"name":{"type":"string","example":"Gateway1"},"isActive":{"type":"boolean","example":true},"priority":{"type":"number","example":1},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"Product":{"type":"object","properties":{"id":{"type":"number","example":1},"name":{"type":"string","example":"Produto Exemplo"},"amount":{"type":"number","example":1500},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}},"PurchaseItem":{"type":"object","properties":{"productId":{"type":"number","example":1},"quantity":{"type":"number","example":2}}},"PaymentData":{"type":"object","properties":{"name":{"type":"string","example":"Comprador Exemplo"},"email":{"type":"string","example":"comprador@example.com"},"cardNumber":{"type":"string","example":"5569000000006063"},"cvv":{"type":"string","example":"010"}}},"PurchasePayload":{"type":"object","properties":{"client":{"type":"object","properties":{"name":{"type":"string","example":"Cliente Exemplo"},"email":{"type":"string","example":"cliente@example.com"}}},"items":{"type":"array","items":{"$ref":"#/components/schemas/PurchaseItem"}},"payment":{"$ref":"#/components/schemas/PaymentData"}}},"User":{"type":"object","properties":{"id":{"type":"number","example":1},"fullName":{"type":"string","example":"João da Silva"},"email":{"type":"string","example":"joao.silva@example.com"},"role":{"type":"string","enum":["ADMIN","MANAGER","FINANCE","USER"]},"createdAt":{"type":"string","format":"date-time"},"updatedAt":{"type":"string","format":"date-time"}}}}},"security":[{"bearerAuth":[]}],"paths":{"/login":{"post":{"summary":"Realiza o login do usuário","tags":["Autenticação"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"email":{"type":"string","example":"usuario@example.com"},"password":{"type":"string","example":"minhaSenha123"}}}}}},"responses":{"200":{"description":"Login realizado com sucesso.","content":{"application/json":{"schema":{"type":"object","properties":{"type":{"type":"string","example":"auth_token"},"value":{"type":"string","example":"oat_ABCDEF123456..."},"expiresAt":{"type":"string","format":"date-time"}}}}}},"401":{"description":"Credenciais inválidas."}}}},"/clients":{"get":{"summary":"Lista todos os clientes","tags":["Clientes"],"responses":{"200":{"description":"Lista de clientes.","content":{"application/json":{"schema":{"type":"object","properties":{"clients":{"type":"array","items":{"$ref":"#/components/schemas/Client"}}}}}}}}}},"/clients/{id}":{"get":{"summary":"Exibe os detalhes de um cliente e todas as suas compras.","tags":["Clientes"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"ID do cliente."}],"responses":{"200":{"description":"Detalhes do cliente com suas transações.","content":{"application/json":{"schema":{"type":"object","properties":{"client":{"$ref":"#/components/schemas/Client"}}}}}},"404":{"description":"Cliente não encontrado."}}}},"/gateways":{"get":{"summary":"Lista todos os gateways","tags":["Gateways"],"responses":{"200":{"description":"Lista de gateways.","content":{"application/json":{"schema":{"type":"object","properties":{"gateways":{"type":"array","items":{"$ref":"#/components/schemas/Gateway"}}}}}}}}}},"/gateways/{id}":{"get":{"summary":"Exibe os detalhes de um gateway específico","tags":["Gateways"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"ID do gateway."}],"responses":{"200":{"description":"Detalhes do gateway.","content":{"application/json":{"schema":{"type":"object","properties":{"gateway":{"$ref":"#/components/schemas/Gateway"}}}}}},"404":{"description":"Gateway não encontrado."}}},"put":{"summary":"Atualiza os dados de um gateway.","tags":["Gateways"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"ID do gateway."}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"isActive":{"type":"boolean","example":true},"priority":{"type":"number","example":2}}}}}},"responses":{"200":{"description":"Gateway atualizado com sucesso.","content":{"application/json":{"schema":{"type":"object","properties":{"gateway":{"$ref":"#/components/schemas/Gateway"},"message":{"type":"string","example":"Gateway atualizado com sucesso."}}}}}},"400":{"description":"Dados inválidos."}}}},"/products":{"post":{"summary":"Cria um novo produto","tags":["Produtos"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","example":"Produto Exemplo"},"amount":{"type":"number","example":1500}}}}}},"responses":{"201":{"description":"Produto criado com sucesso.","content":{"application/json":{"schema":{"type":"object","properties":{"product":{"$ref":"#/components/schemas/Product"},"message":{"type":"string","example":"Produto criado com sucesso!"}}}}}}}},"get":{"summary":"Lista todos os produtos","tags":["Produtos"],"responses":{"200":{"description":"Lista de produtos.","content":{"application/json":{"schema":{"type":"object","properties":{"products":{"type":"array","items":{"$ref":"#/components/schemas/Product"}}}}}}}}}},"/products/{id}":{"get":{"summary":"Exibe os detalhes de um produto específico","tags":["Produtos"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"ID do produto."}],"responses":{"200":{"description":"Detalhes do produto.","content":{"application/json":{"schema":{"type":"object","properties":{"product":{"$ref":"#/components/schemas/Product"}}}}}},"404":{"description":"Produto não encontrado."}}},"put":{"summary":"Atualiza os dados de um produto","tags":["Produtos"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"ID do produto."}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","example":"Produto Atualizado"},"amount":{"type":"number","example":2000}}}}}},"responses":{"200":{"description":"Produto atualizado com sucesso.","content":{"application/json":{"schema":{"type":"object","properties":{"product":{"$ref":"#/components/schemas/Product"},"message":{"type":"string","example":"Produto atualizado com sucesso."}}}}}}}},"delete":{"summary":"Remove um produto","tags":["Produtos"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"ID do produto."}],"responses":{"200":{"description":"Produto removido com sucesso.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Produto removido com sucesso."}}}}}}}}},"/purchase":{"post":{"summary":"Processa uma compra de múltiplos produtos (Nível 3)","tags":["Compras"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PurchasePayload"}}}},"responses":{"200":{"description":"Compra processada com sucesso.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Compra processada com sucesso!"},"data":{"type":"object","properties":{"id":{"type":"number"},"clientId":{"type":"number"},"status":{"type":"string"},"amount":{"type":"number"}}}}}}}},"400":{"description":"Falha ao processar o pagamento."},"404":{"description":"Produto não encontrado."}}},"get":{"summary":"Lista todas as compras (transações)","tags":["Compras"],"responses":{"200":{"description":"Lista de compras.","content":{"application/json":{"schema":{"type":"object","properties":{"purchases":{"type":"array","items":{"$ref":"#/components/schemas/Transaction"}}}}}}}}}},"/purchase/{id}":{"get":{"summary":"Exibe os detalhes de uma compra específica","tags":["Compras"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"ID da compra."}],"responses":{"200":{"description":"Detalhes da compra.","content":{"application/json":{"schema":{"type":"object","properties":{"purchase":{"$ref":"#/components/schemas/Transaction"}}}}}},"404":{"description":"Compra não encontrada."}}}},"/purchase/{id}/refund":{"post":{"summary":"Realiza o reembolso de uma compra","tags":["Compras"],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"ID da compra a ser reembolsada."}],"responses":{"200":{"description":"Reembolso realizado com sucesso.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Reembolso realizado com sucesso!"}}}}}},"400":{"description":"Falha ao processar o reembolso."},"401":{"description":"Acesso não autorizado."}}}},"/user":{"post":{"summary":"Cria um novo usuário","tags":["Usuários"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"fullName":{"type":"string","example":"João da Silva"},"email":{"type":"string","example":"joao.silva@example.com"},"password":{"type":"string","example":"senhaSegura123"},"role":{"type":"string","enum":["ADMIN","MANAGER","FINANCE","USER"]}}}}}},"responses":{"201":{"description":"Usuário criado com sucesso.","content":{"application/json":{"schema":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/User"},"message":{"type":"string","example":"Usuário criado com sucesso!"}}}}}},"401":{"description":"Acesso não autorizado."}}},"get":{"summary":"Lista todos os usuários","tags":["Usuários"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Lista de usuários.","content":{"application/json":{"schema":{"type":"object","properties":{"users":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}}}}}}},"/user/{id}":{"get":{"summary":"Exibe os detalhes de um usuário específico","tags":["Usuários"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"ID do usuário."}],"responses":{"200":{"description":"Detalhes do usuário.","content":{"application/json":{"schema":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/User"}}}}}},"404":{"description":"Usuário não encontrado."}}},"put":{"summary":"Atualiza os dados de um usuário","tags":["Usuários"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"ID do usuário."}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"fullName":{"type":"string","example":"João Atualizado"},"email":{"type":"string","example":"joao.atualizado@example.com"},"role":{"type":"string","enum":["ADMIN","MANAGER","FINANCE","USER"]}}}}}},"responses":{"200":{"description":"Usuário atualizado com sucesso.","content":{"application/json":{"schema":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/User"},"message":{"type":"string","example":"Usuário atualizado com sucesso."}}}}}},"401":{"description":"Acesso não autorizado."}}},"delete":{"summary":"Remove um usuário","tags":["Usuários"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"number"},"description":"ID do usuário."}],"responses":{"200":{"description":"Usuário removido com sucesso.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Usuário removido com sucesso."}}}}}},"401":{"description":"Acesso não autorizado."}}}}},"tags":[]}